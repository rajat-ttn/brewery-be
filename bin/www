#!/usr/bin/env node

const { server, app, io } = require('../app');
const queue_consumer_init = require('./services/queue.consumer');

queue_consumer_init(io);

server.listen(process.env.PORT || 3001, () => {
    console.log('Express server listening on port ' + server.address().port);
});

module.exports = { server, app, io };
// const io = require('socket.io')(server);
// io.on('connection', function(socket){
//     console.log('a user connected');
// });


// const app = require('../app');
//
// app.set('port', process.env.PORT || 3001);
//
// var server = app.listen(app.get('port'), function() {
//   console.log('Express server listening on port ' + server.address().port);
// });
//
// const io = require('socket.io')(server);
// io.on('connection', function(socket){
//     console.log('a user connected');
// });